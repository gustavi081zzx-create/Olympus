NotifyContainer.Parent = KeySystem

local NotifyLayout = Instance.new("UIListLayout")
NotifyLayout.Padding = UDim.new(0, 8)
NotifyLayout.SortOrder = Enum.SortOrder.LayoutOrder
NotifyLayout.Parent = NotifyContainer

local function Notify(title, text, duration)
    duration = duration or 5
    local notif = Instance.new("Frame")
    notif.Size = UDim2.new(1, 0, 0, 70)
    notif.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    notif.BorderSizePixel = 0
    notif.Parent = NotifyContainer

    Instance.new("UICorner", notif).CornerRadius = UDim.new(0, 8)
    local stroke = Instance.new("UIStroke", notif)
    stroke.Color = Color3.fromRGB(170, 0, 255)
    stroke.Thickness = 2

    local t = Instance.new("TextLabel", notif)
    t.Text = title
    t.Font = Enum.Font.FredokaOne
    t.TextColor3 = Color3.fromRGB(170, 0, 255)
    t.TextSize = 18
    t.Position = UDim2.fromOffset(10, 5)
    t.BackgroundTransparency = 1
    t.TextXAlignment = Enum.TextXAlignment.Left

    local d = Instance.new("TextLabel", notif)
    d.Text = text
    d.Font = Enum.Font.SourceSans
    d.TextColor3 = Color3.fromRGB(220, 220, 220)
    d.TextSize = 14
    d.Position = UDim2.fromOffset(10, 28)
    d.Size = UDim2.new(1, -20, 0, 30)
    d.BackgroundTransparency = 1
    d.TextWrapped = true
    d.TextXAlignment = Enum.TextXAlignment.Left

    local bar = Instance.new("Frame", notif)
    bar.Size = UDim2.new(1, -16, 0, 4)
    bar.Position = UDim2.new(0, 8, 1, -8)
    bar.BackgroundColor3 = Color3.fromRGB(170, 0, 255)
    TweenService:Create(bar, TweenInfo.new(duration, Enum.EasingStyle.Linear), {Size = UDim2.new(0, 0, 0, 4)}):Play()
    task.delay(
        duration + 0.5,
        function()
            notif:Destroy()
        end
    )
end

-- Load Luarmor
local api = loadstring(game:HttpGet("https://sdkapi-public.luarmor.net/library.lua"))()
api.script_id = script_id

local function VerifyKey(key)
    local status = api.check_key(script_key or key)

    if (status.code == "KEY_VALID") then
        makefolder("L4BIB HUB")
        writefile("L4BIB HUB/key.txt", key)

        Notify("Success", "Key accepted! Loading script...")

        task.wait(2)

		script_key = script_key or key

        local tween =
            TweenService:Create(
            Main,
            TweenInfo.new(0.5, Enum.EasingStyle.Linear, Enum.EasingDirection.In),
            {Size = UDim2.new(0, 0, 0, 0), Position = UDim2.fromScale(0.5, -0.5)}
        )
        tween:Play()
        tween.Completed:Wait()
        KeySystem:Destroy()

        api.load_script()
        return
    elseif (status.code == "KEY_HWID_LOCKED") then
        Notify("Failed", status.message or "hwid does not match and needs to be reset via bot panel or ad page.")
        return
    elseif (status.code == "KEY_INCORRECT") then
        Notify("Failed", status.message or "Invalid or expired key")
        return
    else
        Player:Kick("Key check failed:" .. status.message .. " Code: " .. status.code)
    end
end

if script_key then
	VerifyKey(script_key)
end

-- Auto-load saved key
task.spawn(
    function()
        if isfile("L4BIB HUB/key.txt") then
            local key = readfile("L4BIB HUB/key.txt")
            if VerifyKey(key) then
                return
            end
        end
    end
)

-- Events
Close.MouseButton1Click:Connect(
    function()
        local tween =
            TweenService:Create(
            Main,
            TweenInfo.new(0.5, Enum.EasingStyle.Linear, Enum.EasingDirection.In),
            {Size = UDim2.new(0, 0, 0, 0), Position = UDim2.fromScale(0.5, -0.5)}
        )
        tween:Play()
        tween.Completed:Wait()
        KeySystem:Destroy()
    end
)

Submit.MouseButton1Click:Connect(
    function()
        VerifyKey(KeyBox.Text)
    end
)

KeyBox.FocusLost:Connect(
    function(enter)
        if enter then
            VerifyKey(KeyBox.Text)
        end
    end
)

-- Change these links!
local WORK_INK = "https://ads.luarmor.net/get_key?for=L4BIB_HUB_WORKINK-EpvokBgEvTci"
local LINKVERTISE = "https://ads.luarmor.net/get_key?for=L4BIB_HUB_LINKVERTISE-aWCZThazuDpE"
local DISCORD_INVITE = "https://discord.gg/dPtFfx8Sjx"

local clip = setclipboard or toclipboard
Work.MouseButton1Click:Connect(
    function()
        clip(WORK_INK)
        Notify("Copied", "Work Ink link copied!")
    end
)
Link.MouseButton1Click:Connect(
    function()
        clip(LINKVERTISE)
        Notify("Copied", "Linkvertise link copied!")
    end
)
Discord.MouseButton1Click:Connect(
    function()
        clip(DISCORD_INVITE)
        Notify("Copied", "Discord copied!")
    end
)
